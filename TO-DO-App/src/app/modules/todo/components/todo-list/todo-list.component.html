<div class="test2" ng>
  <button
    class="btn btn-danger"
    (click)="deleteSelected()"
    [disabled]="!allowDelete"
  >
    Delete Selected
  </button>
  <button
    class="btn btn-success"
    (click)="doneSelected()"
    [disabled]="!allowDone"
  >
    Mark As Done
  </button>
</div>
<hr />
<table>
  <thead style="margin-bottom: 5px;" id="head">
    <tr>
      <th class="check-box check">
        <input
          [checked]="allSelected"
          type="checkbox"
          name=""
          #test
          id=""
          (click)="selectAll($event)"
        />
      </th>
      <th class="due-date">Due Date</th>
      <th class="due-date">Category</th>
      <th class="due-date">Status</th>
      <th class="title">Title</th>
      <th class="reminder-date">Reminder Date</th>
      <th class="options">Option</th>
    </tr>
  </thead>
  <tbody>
    <tr
      *ngFor="let todo of todos; let i = index"
      [attr.id]="i"
      [ngClass]="{ 'highlight-row': i == selectedRow }"
    >
      <td class="check-box check">
        <input
          type="checkbox"
          (click)="selectItem($event, status.id)"
          id="{{ todo.todoID }}"
          [disabled]="isPublic == true && owner != todo.owner"
          *ngIf="isPublic && owner != todo.owner"
        />
        <input
          type="checkbox"
          (click)="selectItem($event, status.id)"
          id="{{ todo.todoID }}"
          [checked]="allSelected"
          [disabled]="isPublic == true && owner != todo.owner"
          *ngIf="todo.owner == owner"
        />
      </td>
      <td class="due-date">{{ todo.dueDate }}</td>
      <td class="due-date">{{ todo.category }}</td>
      <td
        id="{{ todo.status }}"
        class="status due-date left"
        [ngClass]="{
          done: todo.status === 'done',
          pending: todo.status === 'pending' && todo.dueDate >= today,
          'over-due': todo.status === 'pending' && todo.dueDate < today
        }"
        #status
      >
        <span
          class="status"
          [ngClass]="{
            done: todo.status === 'done',
            pending: todo.status === 'pending' && todo.dueDate >= today,
            'over-due': todo.status === 'pending' && todo.dueDate < today
          }"
        ></span>
        &nbsp;{{ todo.status }}
      </td>
      <td class="title">
        {{ titleString[i] }}
        <span>
          <i
            class="glyphicon glyphicon-user test"
            *ngIf="isPublic == true && owner == todo.owner"
          ></i>
          <i
            class="glyphicon glyphicon-info-sign test"
            id="{{ todo.todoID }}"
            (click)="showTodo($event, i)"
          ></i>
        </span>
      </td>
      <td class="reminder-date">{{ todo.reminderDate }}</td>

      <!-- Public -- Not Allowed -->

      <td class="options" *ngIf="isPublic == true && todo.owner != owner">
        <span class="disabled" (click)="canOnlyDelete()"
          ><i class="glyphicon glyphicon-pencil test3 option-disabled"></i>
          <i class="glyphicon glyphicon-ok test3 option-disabled"></i>
          <i class="glyphicon glyphicon-trash test3 disabled"></i>
        </span>
      </td>

      <td class="options" *ngIf="todo.owner == owner">
        <span class="disabled" (click)="canOnlyDelete()"
          ><i
            class="glyphicon glyphicon-pencil test3 option-disabled"
            *ngIf="todo.status == 'done'"
          ></i>
          <i
            class="glyphicon glyphicon-ok test3 option-disabled"
            *ngIf="todo.status == 'done'"
          ></i
        ></span>

        <i
          class="glyphicon glyphicon-pencil test3 options-allowed"
          id="{{ todo.todoID }}"
          (click)="editTodo($event)"
          *ngIf="todo.status != 'done'"
        ></i>
        <i
          class="glyphicon glyphicon-ok test3 options-allowed"
          id="{{ todo.todoID }}"
          (click)="doneTodo($event)"
          *ngIf="todo.status != 'done'"
        ></i>
        <i
          class="glyphicon glyphicon-trash test3 options-allowed"
          id="{{ todo.todoID }}"
          (click)="deleteTodo($event)"
        ></i>
      </td>
    </tr>
  </tbody>
</table>
